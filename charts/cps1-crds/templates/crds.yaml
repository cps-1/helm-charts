apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: users.cps1.tech
spec:
  group: cps1.tech
  names:
    categories: []
    kind: User
    plural: users
    shortNames:
    - cps1-user
    singular: user
  scope: Namespaced
  versions:
  - additionalPrinterColumns: []
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for UserSpec via `CustomResource`
        properties:
          spec:
            properties:
              avatar_url:
                nullable: true
                type: string
              git_email:
                nullable: true
                type: string
              git_username:
                nullable: true
                type: string
              identities:
                items:
                  properties:
                    github:
                      nullable: true
                      properties:
                        avatar_url:
                          type: string
                        emails:
                          items:
                            type: string
                          type: array
                        id:
                          type: string
                        name:
                          type: string
                        username:
                          type: string
                      required:
                      - avatar_url
                      - emails
                      - id
                      - name
                      - username
                      type: object
                    gitlab:
                      nullable: true
                      properties:
                        avatar_url:
                          type: string
                        email:
                          type: string
                        id:
                          type: string
                        name:
                          type: string
                        username:
                          type: string
                      required:
                      - avatar_url
                      - email
                      - id
                      - name
                      - username
                      type: object
                    local:
                      nullable: true
                      properties:
                        password_hash:
                          type: string
                      required:
                      - password_hash
                      type: object
                  type: object
                type: array
              is_admin:
                default: false
                type: boolean
              name:
                nullable: true
                type: string
              username:
                type: string
            required:
            - identities
            - username
            type: object
          status:
            nullable: true
            properties:
              conditions:
                items:
                  properties:
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    observedGeneration:
                      default: 0
                      format: int64
                      type: integer
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
            type: object
        required:
        - spec
        title: User
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: templateworkspaces.cps1.tech
spec:
  group: cps1.tech
  names:
    categories: []
    kind: TemplateWorkspace
    plural: templateworkspaces
    shortNames: []
    singular: templateworkspace
  scope: Namespaced
  versions:
  - additionalPrinterColumns: []
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for TemplateWorkspaceSpec via `CustomResource`
        properties:
          spec:
            properties:
              baseImage:
                type: string
              env:
                items:
                  properties:
                    name:
                      type: string
                    value:
                      type: string
                  required:
                  - name
                  - value
                  type: object
                type: array
              id:
                maxLength: 32
                type: string
                x-kubernetes-validations:
                - message: a workspace ID must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character
                  rule: self.matches('^[a-z0-9](?:[-a-z0-9]*[a-z0-9])?$')
              packages:
                default: []
                items:
                  description: |-
                    A snapshot from a Package, to use in a Workspace. Contains the Package
                    original name, their spec and the input data to be used.
                  properties:
                    inputData:
                      additionalProperties: true
                      default: {}
                      type: object
                    name:
                      type: string
                    spec:
                      properties:
                        icon:
                          properties:
                            svg:
                              description: |-
                                The complete svg image with enclosing tags. E.g:
                                ```
                                <svg role="img" fill="#FFFFFF" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <title>Title</title>
                                    <path d="(...)"/>
                                </svg>
                                ```
                              maxLength: 20000
                              nullable: true
                              type: string
                            url:
                              maxLength: 2000
                              nullable: true
                              type: string
                          type: object
                          x-kubernetes-validations:
                          - message: an icon should either define a url or an svg
                            rule: (has(self.url) && !has(self.svg)) || (!has(self.url) && has(self.svg))
                        label:
                          type: string
                        properties:
                          items:
                            properties:
                              default:
                                description: |-
                                  A default value for the property. Used to pre-populate forms in user
                                  interfaces. If this propetry is required and received an empty value,
                                  this value will be used if available; otherwise it'll err.
                                nullable: true
                                type: string
                              kind:
                                description: What is the value type of this property.
                                enum:
                                - string
                                - text
                                - secret
                                - number
                                - select
                                - multi
                                - tag
                                type: string
                              label:
                                description: |-
                                  A friendly name to describe this property. This will appear on user
                                  interfaces.
                                type: string
                              name:
                                description: |-
                                  The property identifier. Must be unique across the collection of
                                  properties from this resource.
                                type: string
                              required:
                                description: If this property is required or if its optional.
                                type: boolean
                              tip:
                                description: |-
                                  Complementary text to help the user to fill the property value. This
                                  will appear on the user interface.
                                nullable: true
                                type: string
                              values:
                                description: |-
                                  A list of values available for the property. This is used if the kind
                                  is select, multi, or tags.
                                items:
                                  type: string
                                nullable: true
                                type: array
                            required:
                            - kind
                            - label
                            - name
                            - required
                            type: object
                          type: array
                        setupScript:
                          type: string
                      required:
                      - icon
                      - label
                      - properties
                      - setupScript
                      type: object
                  required:
                  - name
                  - spec
                  type: object
                type: array
              ports:
                default: []
                items:
                  properties:
                    exposure:
                      default: Internal
                      enum:
                      - Internal
                      - External
                      type: string
                    port:
                      format: int32
                      maximum: 65535.0
                      minimum: 1024.0
                      type: integer
                    protocol:
                      default: Tcp
                      enum:
                      - Http
                      - Tcp
                      - Udp
                      type: string
                  required:
                  - port
                  type: object
                maxItems: 32
                type: array
              repositories:
                items:
                  type: string
                maxItems: 2000
                type: array
            required:
            - baseImage
            - id
            type: object
          status:
            nullable: true
            properties:
              conditions:
                items:
                  properties:
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    observedGeneration:
                      default: 0
                      format: int64
                      type: integer
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              latestImage:
                type: string
            required:
            - latestImage
            type: object
        required:
        - spec
        title: TemplateWorkspace
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: resourcesets.cps1.tech
spec:
  group: cps1.tech
  names:
    categories: []
    kind: ResourceSet
    plural: resourcesets
    shortNames: []
    singular: resourceset
  scope: Namespaced
  versions:
  - additionalPrinterColumns: []
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for ResourceSetSpec via `CustomResource`
        properties:
          spec:
            properties:
              description:
                type: string
              icon:
                properties:
                  svg:
                    description: |-
                      The complete svg image with enclosing tags. E.g:
                      ```
                      <svg role="img" fill="#FFFFFF" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                          <title>Title</title>
                          <path d="(...)"/>
                      </svg>
                      ```
                    maxLength: 20000
                    nullable: true
                    type: string
                  url:
                    maxLength: 2000
                    nullable: true
                    type: string
                type: object
                x-kubernetes-validations:
                - message: an icon should either define a url or an svg
                  rule: (has(self.url) && !has(self.svg)) || (!has(self.url) && has(self.svg))
              input:
                items:
                  properties:
                    default:
                      description: |-
                        A default value for the property. Used to pre-populate forms in user
                        interfaces. If this propetry is required and received an empty value,
                        this value will be used if available; otherwise it'll err.
                      nullable: true
                      type: string
                    kind:
                      description: What is the value type of this property.
                      enum:
                      - string
                      - text
                      - secret
                      - number
                      - select
                      - multi
                      - tag
                      type: string
                    label:
                      description: |-
                        A friendly name to describe this property. This will appear on user
                        interfaces.
                      type: string
                    name:
                      description: |-
                        The property identifier. Must be unique across the collection of
                        properties from this resource.
                      maxLength: 32
                      type: string
                      x-kubernetes-validations:
                      - message: a name must consist of lower case alphanumeric characters or '_'
                        rule: self.matches('^[_a-z0-9]+$')
                    required:
                      description: If this property is required or if its optional.
                      type: boolean
                    tip:
                      description: |-
                        Complementary text to help the user to fill the property value. This
                        will appear on the user interface.
                      nullable: true
                      type: string
                    values:
                      description: |-
                        A list of values available for the property. This is used if the kind
                        is select, multi, or tags.
                      items:
                        type: string
                      nullable: true
                      type: array
                  required:
                  - kind
                  - label
                  - name
                  - required
                  type: object
                maxItems: 32
                type: array
              label:
                type: string
              output:
                items:
                  properties:
                    name:
                      description: |-
                        The property identifier. Must be unique across the collection of
                        properties from this resource.
                      maxLength: 32
                      type: string
                      x-kubernetes-validations:
                      - message: a name must consist of lower case alphanumeric characters or '_'
                        rule: self.matches('^[_a-z0-9]+$')
                    source:
                      description: A CEL expression with the output source
                      type: string
                  required:
                  - name
                  - source
                  type: object
                maxItems: 32
                type: array
              resources:
                items:
                  properties:
                    id:
                      maxLength: 32
                      type: string
                    template:
                      properties:
                        apiVersion:
                          type: string
                        kind:
                          type: string
                        metadata:
                          default:
                            annotations: null
                            finalizers: null
                            generate_name: null
                            labels: null
                          description: |-
                            `ObjectMeta` attributes that are writable, that is not read-only or populated
                            by the server/system. This also does not include some attributes that CPS1
                            itself will set to guarantee resource isolation and decommissioning, such
                            as:
                            - name
                            - namespace
                            - ownerReferences

                            Based on <https://github.com/Arnavion/k8s-openapi/blob/139dd23/src/v1_31/apimachinery/pkg/apis/meta/v1/object_meta.rs#L5-L64>
                          properties:
                            annotations:
                              additionalProperties:
                                type: string
                              nullable: true
                              type: object
                            finalizers:
                              items:
                                type: string
                              nullable: true
                              type: array
                            generate_name:
                              nullable: true
                              type: string
                            labels:
                              additionalProperties:
                                type: string
                              nullable: true
                              type: object
                          type: object
                      required:
                      - apiVersion
                      - kind
                      type: object
                      x-kubernetes-preserve-unknown-fields: true
                  required:
                  - id
                  - template
                  type: object
                type: array
            required:
            - description
            - icon
            - input
            - label
            - output
            - resources
            type: object
          status:
            nullable: true
            type: object
        required:
        - spec
        title: ResourceSet
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: packages.cps1.tech
spec:
  group: cps1.tech
  names:
    categories: []
    kind: Package
    plural: packages
    shortNames: []
    singular: package
  scope: Namespaced
  versions:
  - additionalPrinterColumns: []
    name: v1alpha2
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for PackageSpec via `CustomResource`
        properties:
          spec:
            properties:
              icon:
                properties:
                  svg:
                    description: |-
                      The complete svg image with enclosing tags. E.g:
                      ```
                      <svg role="img" fill="#FFFFFF" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                          <title>Title</title>
                          <path d="(...)"/>
                      </svg>
                      ```
                    maxLength: 20000
                    nullable: true
                    type: string
                  url:
                    maxLength: 2000
                    nullable: true
                    type: string
                type: object
                x-kubernetes-validations:
                - message: an icon should either define a url or an svg
                  rule: (has(self.url) && !has(self.svg)) || (!has(self.url) && has(self.svg))
              label:
                type: string
              properties:
                items:
                  properties:
                    default:
                      description: |-
                        A default value for the property. Used to pre-populate forms in user
                        interfaces. If this propetry is required and received an empty value,
                        this value will be used if available; otherwise it'll err.
                      nullable: true
                      type: string
                    kind:
                      description: What is the value type of this property.
                      enum:
                      - string
                      - text
                      - secret
                      - number
                      - select
                      - multi
                      - tag
                      type: string
                    label:
                      description: |-
                        A friendly name to describe this property. This will appear on user
                        interfaces.
                      type: string
                    name:
                      description: |-
                        The property identifier. Must be unique across the collection of
                        properties from this resource.
                      type: string
                    required:
                      description: If this property is required or if its optional.
                      type: boolean
                    tip:
                      description: |-
                        Complementary text to help the user to fill the property value. This
                        will appear on the user interface.
                      nullable: true
                      type: string
                    values:
                      description: |-
                        A list of values available for the property. This is used if the kind
                        is select, multi, or tags.
                      items:
                        type: string
                      nullable: true
                      type: array
                  required:
                  - kind
                  - label
                  - name
                  - required
                  type: object
                type: array
              setupScript:
                type: string
            required:
            - icon
            - label
            - properties
            - setupScript
            type: object
          status:
            nullable: true
            type: object
        required:
        - spec
        title: Package
        type: object
    served: true
    storage: true
    subresources:
      status: {}
  - additionalPrinterColumns: []
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for PackageSpec via `CustomResource`
        properties:
          spec:
            properties:
              icon:
                type: string
              label:
                type: string
              properties:
                items:
                  properties:
                    default:
                      description: |-
                        A default value for the property. Used to pre-populate forms in user
                        interfaces. If this propetry is required and received an empty value,
                        this value will be used if available; otherwise it'll err.
                      nullable: true
                      type: string
                    kind:
                      description: What is the value type of this property.
                      enum:
                      - string
                      - text
                      - secret
                      - number
                      - select
                      - multi
                      - tag
                      type: string
                    label:
                      description: |-
                        A friendly name to describe this property. This will appear on user
                        interfaces.
                      type: string
                    name:
                      description: |-
                        The property identifier. Must be unique across the collection of
                        properties from this resource.
                      type: string
                    required:
                      description: If this property is required or if its optional.
                      type: boolean
                    tip:
                      description: |-
                        Complementary text to help the user to fill the property value. This
                        will appear on the user interface.
                      nullable: true
                      type: string
                    values:
                      description: |-
                        A list of values available for the property. This is used if the kind
                        is select, multi, or tags.
                      items:
                        type: string
                      nullable: true
                      type: array
                  required:
                  - kind
                  - label
                  - name
                  - required
                  type: object
                type: array
              setupScript:
                type: string
            required:
            - icon
            - label
            - properties
            - setupScript
            type: object
          status:
            nullable: true
            type: object
        required:
        - spec
        title: Package
        type: object
    served: true
    storage: false
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: templates.cps1.tech
spec:
  group: cps1.tech
  names:
    categories: []
    kind: Template
    plural: templates
    shortNames: []
    singular: template
  scope: Namespaced
  versions:
  - additionalPrinterColumns: []
    name: v1alpha2
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for TemplateSpec via `CustomResource`
        properties:
          spec:
            properties:
              description:
                nullable: true
                type: string
              icon:
                properties:
                  svg:
                    description: |-
                      The complete svg image with enclosing tags. E.g:
                      ```
                      <svg role="img" fill="#FFFFFF" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                          <title>Title</title>
                          <path d="(...)"/>
                      </svg>
                      ```
                    maxLength: 20000
                    nullable: true
                    type: string
                  url:
                    maxLength: 2000
                    nullable: true
                    type: string
                type: object
                x-kubernetes-validations:
                - message: an icon should either define a url or an svg
                  rule: (has(self.url) && !has(self.svg)) || (!has(self.url) && has(self.svg))
              resources:
                items:
                  properties:
                    id:
                      maxLength: 32
                      type: string
                      x-kubernetes-validations:
                      - message: a ID must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character
                        rule: self.matches('^[a-z0-9](?:[-a-z0-9]*[a-z0-9])?$')
                    inputData:
                      additionalProperties: true
                      default: {}
                      type: object
                    resourceRef:
                      properties:
                        name:
                          type: string
                        namespace:
                          type: string
                      required:
                      - name
                      - namespace
                      type: object
                  required:
                  - id
                  - resourceRef
                  type: object
                maxItems: 32
                type: array
                x-kubernetes-validations:
                - message: a resource ID must be unique
                  rule: self.all(w1, self.exists_one(w2, w1.id == w2.id))
              workspaces:
                items:
                  properties:
                    baseImage:
                      type: string
                    env:
                      items:
                        properties:
                          name:
                            type: string
                          value:
                            type: string
                        required:
                        - name
                        - value
                        type: object
                      type: array
                    id:
                      maxLength: 32
                      type: string
                      x-kubernetes-validations:
                      - message: a ID must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character
                        rule: self.matches('^[a-z0-9](?:[-a-z0-9]*[a-z0-9])?$')
                    packages:
                      items:
                        properties:
                          inputData:
                            additionalProperties: true
                            default: {}
                            type: object
                          packageRef:
                            properties:
                              name:
                                type: string
                              namespace:
                                type: string
                            required:
                            - name
                            - namespace
                            type: object
                        required:
                        - packageRef
                        type: object
                      type: array
                    ports:
                      items:
                        properties:
                          exposure:
                            default: Internal
                            enum:
                            - Internal
                            - External
                            type: string
                          port:
                            format: int32
                            maximum: 65535.0
                            minimum: 1024.0
                            type: integer
                          protocol:
                            default: Tcp
                            enum:
                            - Http
                            - Tcp
                            - Udp
                            type: string
                        required:
                        - port
                        type: object
                      type: array
                    repositories:
                      items:
                        type: string
                      type: array
                  required:
                  - baseImage
                  - env
                  - id
                  - packages
                  - ports
                  - repositories
                  type: object
                maxItems: 32
                type: array
                x-kubernetes-validations:
                - message: a workspace ID must be unique
                  rule: self.all(w1, self.exists_one(w2, w1.id == w2.id))
            required:
            - icon
            - resources
            - workspaces
            type: object
          status:
            nullable: true
            properties:
              conditions:
                items:
                  properties:
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    observedGeneration:
                      default: 0
                      format: int64
                      type: integer
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              lastVersion:
                format: uint32
                minimum: 0.0
                type: integer
            required:
            - lastVersion
            type: object
        required:
        - spec
        title: TemplateValidated
        type: object
        x-kubernetes-validations:
        - message: templates name must have at most 160 characters
          rule: size(self.metadata.name) <= 160
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: templatesnapshots.cps1.tech
spec:
  group: cps1.tech
  names:
    categories: []
    kind: TemplateSnapshot
    plural: templatesnapshots
    shortNames: []
    singular: templatesnapshot
  scope: Namespaced
  versions:
  - additionalPrinterColumns: []
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for TemplateSnapshotSpec via `CustomResource`
        properties:
          spec:
            properties:
              resources:
                items:
                  properties:
                    id:
                      maxLength: 32
                      type: string
                      x-kubernetes-validations:
                      - message: a workspace ID must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character
                        rule: self.matches('^[a-z0-9](?:[-a-z0-9]*[a-z0-9])?$')
                    inputData:
                      additionalProperties: true
                      default: {}
                      type: object
                    resourceName:
                      type: string
                    spec:
                      properties:
                        description:
                          type: string
                        icon:
                          properties:
                            svg:
                              description: |-
                                The complete svg image with enclosing tags. E.g:
                                ```
                                <svg role="img" fill="#FFFFFF" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <title>Title</title>
                                    <path d="(...)"/>
                                </svg>
                                ```
                              maxLength: 20000
                              nullable: true
                              type: string
                            url:
                              maxLength: 2000
                              nullable: true
                              type: string
                          type: object
                          x-kubernetes-validations:
                          - message: an icon should either define a url or an svg
                            rule: (has(self.url) && !has(self.svg)) || (!has(self.url) && has(self.svg))
                        input:
                          items:
                            properties:
                              default:
                                description: |-
                                  A default value for the property. Used to pre-populate forms in user
                                  interfaces. If this propetry is required and received an empty value,
                                  this value will be used if available; otherwise it'll err.
                                nullable: true
                                type: string
                              kind:
                                description: What is the value type of this property.
                                enum:
                                - string
                                - text
                                - secret
                                - number
                                - select
                                - multi
                                - tag
                                type: string
                              label:
                                description: |-
                                  A friendly name to describe this property. This will appear on user
                                  interfaces.
                                type: string
                              name:
                                description: |-
                                  The property identifier. Must be unique across the collection of
                                  properties from this resource.
                                maxLength: 32
                                type: string
                                x-kubernetes-validations:
                                - message: a name must consist of lower case alphanumeric characters or '_'
                                  rule: self.matches('^[_a-z0-9]+$')
                              required:
                                description: If this property is required or if its optional.
                                type: boolean
                              tip:
                                description: |-
                                  Complementary text to help the user to fill the property value. This
                                  will appear on the user interface.
                                nullable: true
                                type: string
                              values:
                                description: |-
                                  A list of values available for the property. This is used if the kind
                                  is select, multi, or tags.
                                items:
                                  type: string
                                nullable: true
                                type: array
                            required:
                            - kind
                            - label
                            - name
                            - required
                            type: object
                          maxItems: 32
                          type: array
                        label:
                          type: string
                        output:
                          items:
                            properties:
                              name:
                                description: |-
                                  The property identifier. Must be unique across the collection of
                                  properties from this resource.
                                maxLength: 32
                                type: string
                                x-kubernetes-validations:
                                - message: a name must consist of lower case alphanumeric characters or '_'
                                  rule: self.matches('^[_a-z0-9]+$')
                              source:
                                description: A CEL expression with the output source
                                type: string
                            required:
                            - name
                            - source
                            type: object
                          maxItems: 32
                          type: array
                        resources:
                          items:
                            properties:
                              id:
                                maxLength: 32
                                type: string
                              template:
                                properties:
                                  apiVersion:
                                    type: string
                                  kind:
                                    type: string
                                  metadata:
                                    default:
                                      annotations: null
                                      finalizers: null
                                      generate_name: null
                                      labels: null
                                    description: |-
                                      `ObjectMeta` attributes that are writable, that is not read-only or populated
                                      by the server/system. This also does not include some attributes that CPS1
                                      itself will set to guarantee resource isolation and decommissioning, such
                                      as:
                                      - name
                                      - namespace
                                      - ownerReferences

                                      Based on <https://github.com/Arnavion/k8s-openapi/blob/139dd23/src/v1_31/apimachinery/pkg/apis/meta/v1/object_meta.rs#L5-L64>
                                    properties:
                                      annotations:
                                        additionalProperties:
                                          type: string
                                        nullable: true
                                        type: object
                                      finalizers:
                                        items:
                                          type: string
                                        nullable: true
                                        type: array
                                      generate_name:
                                        nullable: true
                                        type: string
                                      labels:
                                        additionalProperties:
                                          type: string
                                        nullable: true
                                        type: object
                                    type: object
                                required:
                                - apiVersion
                                - kind
                                type: object
                                x-kubernetes-preserve-unknown-fields: true
                            required:
                            - id
                            - template
                            type: object
                          type: array
                      required:
                      - description
                      - icon
                      - input
                      - label
                      - output
                      - resources
                      type: object
                  required:
                  - id
                  - resourceName
                  - spec
                  type: object
                maxItems: 32
                type: array
              version:
                format: uint32
                minimum: 0.0
                type: integer
              workspaces:
                items:
                  properties:
                    baseImage:
                      type: string
                    env:
                      items:
                        properties:
                          name:
                            type: string
                          value:
                            type: string
                        required:
                        - name
                        - value
                        type: object
                      type: array
                    id:
                      maxLength: 32
                      type: string
                      x-kubernetes-validations:
                      - message: a workspace ID must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character
                        rule: self.matches('^[a-z0-9](?:[-a-z0-9]*[a-z0-9])?$')
                    packages:
                      default: []
                      items:
                        description: |-
                          A snapshot from a Package, to use in a Workspace. Contains the Package
                          original name, their spec and the input data to be used.
                        properties:
                          inputData:
                            additionalProperties: true
                            default: {}
                            type: object
                          name:
                            type: string
                          spec:
                            properties:
                              icon:
                                properties:
                                  svg:
                                    description: |-
                                      The complete svg image with enclosing tags. E.g:
                                      ```
                                      <svg role="img" fill="#FFFFFF" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                          <title>Title</title>
                                          <path d="(...)"/>
                                      </svg>
                                      ```
                                    maxLength: 20000
                                    nullable: true
                                    type: string
                                  url:
                                    maxLength: 2000
                                    nullable: true
                                    type: string
                                type: object
                                x-kubernetes-validations:
                                - message: an icon should either define a url or an svg
                                  rule: (has(self.url) && !has(self.svg)) || (!has(self.url) && has(self.svg))
                              label:
                                type: string
                              properties:
                                items:
                                  properties:
                                    default:
                                      description: |-
                                        A default value for the property. Used to pre-populate forms in user
                                        interfaces. If this propetry is required and received an empty value,
                                        this value will be used if available; otherwise it'll err.
                                      nullable: true
                                      type: string
                                    kind:
                                      description: What is the value type of this property.
                                      enum:
                                      - string
                                      - text
                                      - secret
                                      - number
                                      - select
                                      - multi
                                      - tag
                                      type: string
                                    label:
                                      description: |-
                                        A friendly name to describe this property. This will appear on user
                                        interfaces.
                                      type: string
                                    name:
                                      description: |-
                                        The property identifier. Must be unique across the collection of
                                        properties from this resource.
                                      type: string
                                    required:
                                      description: If this property is required or if its optional.
                                      type: boolean
                                    tip:
                                      description: |-
                                        Complementary text to help the user to fill the property value. This
                                        will appear on the user interface.
                                      nullable: true
                                      type: string
                                    values:
                                      description: |-
                                        A list of values available for the property. This is used if the kind
                                        is select, multi, or tags.
                                      items:
                                        type: string
                                      nullable: true
                                      type: array
                                  required:
                                  - kind
                                  - label
                                  - name
                                  - required
                                  type: object
                                type: array
                              setupScript:
                                type: string
                            required:
                            - icon
                            - label
                            - properties
                            - setupScript
                            type: object
                        required:
                        - name
                        - spec
                        type: object
                      type: array
                    ports:
                      default: []
                      items:
                        properties:
                          exposure:
                            default: Internal
                            enum:
                            - Internal
                            - External
                            type: string
                          port:
                            format: int32
                            maximum: 65535.0
                            minimum: 1024.0
                            type: integer
                          protocol:
                            default: Tcp
                            enum:
                            - Http
                            - Tcp
                            - Udp
                            type: string
                        required:
                        - port
                        type: object
                      maxItems: 32
                      type: array
                    repositories:
                      items:
                        type: string
                      maxItems: 2000
                      type: array
                  required:
                  - baseImage
                  - id
                  type: object
                maxItems: 32
                type: array
            required:
            - resources
            - version
            - workspaces
            type: object
          status:
            nullable: true
            properties:
              conditions:
                items:
                  properties:
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    observedGeneration:
                      default: 0
                      format: int64
                      type: integer
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              failed:
                format: uint16
                maximum: 65535.0
                minimum: 0.0
                type: integer
              succeeded:
                format: uint16
                maximum: 65535.0
                minimum: 0.0
                type: integer
            required:
            - failed
            - succeeded
            type: object
        required:
        - spec
        title: TemplateSnapshot
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: configs.cps1.tech
spec:
  group: cps1.tech
  names:
    categories: []
    kind: Config
    plural: configs
    shortNames: []
    singular: config
  scope: Namespaced
  versions:
  - additionalPrinterColumns: []
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for ConfigSpec via `CustomResource`
        properties:
          spec:
            properties:
              buildWithUserNamespaces:
                default: false
                type: boolean
              buildahImage:
                default: quay.io/containers/buildah:v1.40.1-immutable
                type: string
              defaultResourceTimeout:
                default: 300
                format: int32
                type: integer
              gateway:
                properties:
                  hostname:
                    type: string
                  httpPort:
                    default: 8080
                    format: int32
                    type: integer
                  httpsPort:
                    default: 8443
                    format: int32
                    type: integer
                  sshPort:
                    default: 2222
                    format: int32
                    type: integer
                  tlsEnabled:
                    default: true
                    type: boolean
                required:
                - hostname
                type: object
              hostname:
                type: string
              imageRegistry:
                properties:
                  pullHost:
                    type: string
                  pushHost:
                    type: string
                required:
                - pullHost
                - pushHost
                type: object
              oauthGithub:
                nullable: true
                properties:
                  clientId:
                    type: string
                  orgName:
                    type: string
                required:
                - clientId
                - orgName
                type: object
              oauthGitlab:
                nullable: true
                properties:
                  applicationId:
                    type: string
                  groupId:
                    type: string
                  hostname:
                    default: gitlab.com
                    type: string
                required:
                - applicationId
                - groupId
                type: object
              sshKnownHosts:
                type: string
              userNamespacePrefix:
                default: u-
                type: string
              userNamespaceServiceAccountAnnotations:
                additionalProperties:
                  type: string
                description: |-
                  Which annotations should be applied to the user namespace service
                  account.
                nullable: true
                type: object
              workspaceVolumes:
                nullable: true
                properties:
                  accessMode:
                    default: ReadWriteOnce
                    type: string
                  allocationStrategy:
                    enum:
                    - isolatedPerWorkspace
                    - sharedPerUser
                    type: string
                  size:
                    default: 12Gi
                    type: string
                  storageClass:
                    nullable: true
                    type: string
                required:
                - allocationStrategy
                type: object
            required:
            - gateway
            - hostname
            - imageRegistry
            - sshKnownHosts
            type: object
          status:
            nullable: true
            properties:
              instanceId:
                type: string
            required:
            - instanceId
            type: object
        required:
        - spec
        title: Config
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: environments.cps1.tech
spec:
  group: cps1.tech
  names:
    categories: []
    kind: Environment
    plural: environments
    shortNames: []
    singular: environment
  scope: Namespaced
  versions:
  - additionalPrinterColumns: []
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for EnvironmentSpec via `CustomResource`
        properties:
          spec:
            properties:
              input:
                nullable: true
                properties:
                  workspaces:
                    items:
                      properties:
                        id:
                          type: string
                        repos_branches:
                          items:
                            properties:
                              branch:
                                type: string
                              repository:
                                type: string
                            required:
                            - branch
                            - repository
                            type: object
                          type: array
                      required:
                      - id
                      - repos_branches
                      type: object
                    nullable: true
                    type: array
                type: object
              run:
                type: boolean
              templateRef:
                properties:
                  name:
                    type: string
                  namespace:
                    type: string
                required:
                - name
                - namespace
                type: object
            required:
            - run
            - templateRef
            type: object
          status:
            nullable: true
            type: object
        required:
        - spec
        title: EnvironmentValidated
        type: object
        x-kubernetes-validations:
        - message: environments name must have at most 180 characters
          rule: size(self.metadata.name) <= 180
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: environmentworkspaces.cps1.tech
spec:
  group: cps1.tech
  names:
    categories: []
    kind: EnvironmentWorkspace
    plural: environmentworkspaces
    shortNames: []
    singular: environmentworkspace
  scope: Namespaced
  versions:
  - additionalPrinterColumns: []
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for EnvironmentWorkspaceSpec via `CustomResource`
        properties:
          spec:
            properties:
              env:
                items:
                  properties:
                    name:
                      type: string
                    value:
                      type: string
                  required:
                  - name
                  - value
                  type: object
                type: array
              id:
                type: string
              image:
                type: string
              ports:
                items:
                  properties:
                    exposure:
                      default: Internal
                      enum:
                      - Internal
                      - External
                      type: string
                    port:
                      format: int32
                      maximum: 65535.0
                      minimum: 1024.0
                      type: integer
                    protocol:
                      default: Tcp
                      enum:
                      - Http
                      - Tcp
                      - Udp
                      type: string
                  required:
                  - port
                  type: object
                type: array
              repositories:
                items:
                  properties:
                    branch:
                      nullable: true
                      type: string
                    uri:
                      type: string
                  required:
                  - uri
                  type: object
                type: array
              run:
                type: boolean
            required:
            - env
            - id
            - image
            - ports
            - repositories
            - run
            type: object
          status:
            nullable: true
            properties:
              conditions:
                items:
                  properties:
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    observedGeneration:
                      default: 0
                      format: int64
                      type: integer
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              phase:
                enum:
                - Pending
                - Ready
                - Failed
                - Paused
                type: string
            required:
            - phase
            type: object
        required:
        - spec
        title: EnvironmentWorkspace
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: environmentsnapshots.cps1.tech
spec:
  group: cps1.tech
  names:
    categories: []
    kind: EnvironmentSnapshot
    plural: environmentsnapshots
    shortNames: []
    singular: environmentsnapshot
  scope: Namespaced
  versions:
  - additionalPrinterColumns: []
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for EnvironmentSnapshotSpec via `CustomResource`
        properties:
          spec:
            properties:
              inputSnapshot:
                nullable: true
                properties:
                  workspaces:
                    items:
                      properties:
                        id:
                          type: string
                        repos_branches:
                          items:
                            properties:
                              branch:
                                type: string
                              repository:
                                type: string
                            required:
                            - branch
                            - repository
                            type: object
                          type: array
                      required:
                      - id
                      - repos_branches
                      type: object
                    nullable: true
                    type: array
                type: object
              run:
                type: boolean
              templateSnapshot:
                properties:
                  resources:
                    items:
                      properties:
                        id:
                          maxLength: 32
                          type: string
                          x-kubernetes-validations:
                          - message: a workspace ID must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character
                            rule: self.matches('^[a-z0-9](?:[-a-z0-9]*[a-z0-9])?$')
                        inputData:
                          additionalProperties: true
                          default: {}
                          type: object
                        resourceName:
                          type: string
                        spec:
                          properties:
                            description:
                              type: string
                            icon:
                              properties:
                                svg:
                                  description: |-
                                    The complete svg image with enclosing tags. E.g:
                                    ```
                                    <svg role="img" fill="#FFFFFF" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <title>Title</title>
                                        <path d="(...)"/>
                                    </svg>
                                    ```
                                  maxLength: 20000
                                  nullable: true
                                  type: string
                                url:
                                  maxLength: 2000
                                  nullable: true
                                  type: string
                              type: object
                              x-kubernetes-validations:
                              - message: an icon should either define a url or an svg
                                rule: (has(self.url) && !has(self.svg)) || (!has(self.url) && has(self.svg))
                            input:
                              items:
                                properties:
                                  default:
                                    description: |-
                                      A default value for the property. Used to pre-populate forms in user
                                      interfaces. If this propetry is required and received an empty value,
                                      this value will be used if available; otherwise it'll err.
                                    nullable: true
                                    type: string
                                  kind:
                                    description: What is the value type of this property.
                                    enum:
                                    - string
                                    - text
                                    - secret
                                    - number
                                    - select
                                    - multi
                                    - tag
                                    type: string
                                  label:
                                    description: |-
                                      A friendly name to describe this property. This will appear on user
                                      interfaces.
                                    type: string
                                  name:
                                    description: |-
                                      The property identifier. Must be unique across the collection of
                                      properties from this resource.
                                    maxLength: 32
                                    type: string
                                    x-kubernetes-validations:
                                    - message: a name must consist of lower case alphanumeric characters or '_'
                                      rule: self.matches('^[_a-z0-9]+$')
                                  required:
                                    description: If this property is required or if its optional.
                                    type: boolean
                                  tip:
                                    description: |-
                                      Complementary text to help the user to fill the property value. This
                                      will appear on the user interface.
                                    nullable: true
                                    type: string
                                  values:
                                    description: |-
                                      A list of values available for the property. This is used if the kind
                                      is select, multi, or tags.
                                    items:
                                      type: string
                                    nullable: true
                                    type: array
                                required:
                                - kind
                                - label
                                - name
                                - required
                                type: object
                              maxItems: 32
                              type: array
                            label:
                              type: string
                            output:
                              items:
                                properties:
                                  name:
                                    description: |-
                                      The property identifier. Must be unique across the collection of
                                      properties from this resource.
                                    maxLength: 32
                                    type: string
                                    x-kubernetes-validations:
                                    - message: a name must consist of lower case alphanumeric characters or '_'
                                      rule: self.matches('^[_a-z0-9]+$')
                                  source:
                                    description: A CEL expression with the output source
                                    type: string
                                required:
                                - name
                                - source
                                type: object
                              maxItems: 32
                              type: array
                            resources:
                              items:
                                properties:
                                  id:
                                    maxLength: 32
                                    type: string
                                  template:
                                    properties:
                                      apiVersion:
                                        type: string
                                      kind:
                                        type: string
                                      metadata:
                                        default:
                                          annotations: null
                                          finalizers: null
                                          generate_name: null
                                          labels: null
                                        description: |-
                                          `ObjectMeta` attributes that are writable, that is not read-only or populated
                                          by the server/system. This also does not include some attributes that CPS1
                                          itself will set to guarantee resource isolation and decommissioning, such
                                          as:
                                          - name
                                          - namespace
                                          - ownerReferences

                                          Based on <https://github.com/Arnavion/k8s-openapi/blob/139dd23/src/v1_31/apimachinery/pkg/apis/meta/v1/object_meta.rs#L5-L64>
                                        properties:
                                          annotations:
                                            additionalProperties:
                                              type: string
                                            nullable: true
                                            type: object
                                          finalizers:
                                            items:
                                              type: string
                                            nullable: true
                                            type: array
                                          generate_name:
                                            nullable: true
                                            type: string
                                          labels:
                                            additionalProperties:
                                              type: string
                                            nullable: true
                                            type: object
                                        type: object
                                    required:
                                    - apiVersion
                                    - kind
                                    type: object
                                    x-kubernetes-preserve-unknown-fields: true
                                required:
                                - id
                                - template
                                type: object
                              type: array
                          required:
                          - description
                          - icon
                          - input
                          - label
                          - output
                          - resources
                          type: object
                      required:
                      - id
                      - resourceName
                      - spec
                      type: object
                    maxItems: 32
                    type: array
                  version:
                    format: uint32
                    minimum: 0.0
                    type: integer
                  workspaces:
                    items:
                      properties:
                        baseImage:
                          type: string
                        env:
                          items:
                            properties:
                              name:
                                type: string
                              value:
                                type: string
                            required:
                            - name
                            - value
                            type: object
                          type: array
                        id:
                          maxLength: 32
                          type: string
                          x-kubernetes-validations:
                          - message: a workspace ID must consist of lower case alphanumeric characters, '-' or '.', and must start and end with an alphanumeric character
                            rule: self.matches('^[a-z0-9](?:[-a-z0-9]*[a-z0-9])?$')
                        packages:
                          default: []
                          items:
                            description: |-
                              A snapshot from a Package, to use in a Workspace. Contains the Package
                              original name, their spec and the input data to be used.
                            properties:
                              inputData:
                                additionalProperties: true
                                default: {}
                                type: object
                              name:
                                type: string
                              spec:
                                properties:
                                  icon:
                                    properties:
                                      svg:
                                        description: |-
                                          The complete svg image with enclosing tags. E.g:
                                          ```
                                          <svg role="img" fill="#FFFFFF" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                              <title>Title</title>
                                              <path d="(...)"/>
                                          </svg>
                                          ```
                                        maxLength: 20000
                                        nullable: true
                                        type: string
                                      url:
                                        maxLength: 2000
                                        nullable: true
                                        type: string
                                    type: object
                                    x-kubernetes-validations:
                                    - message: an icon should either define a url or an svg
                                      rule: (has(self.url) && !has(self.svg)) || (!has(self.url) && has(self.svg))
                                  label:
                                    type: string
                                  properties:
                                    items:
                                      properties:
                                        default:
                                          description: |-
                                            A default value for the property. Used to pre-populate forms in user
                                            interfaces. If this propetry is required and received an empty value,
                                            this value will be used if available; otherwise it'll err.
                                          nullable: true
                                          type: string
                                        kind:
                                          description: What is the value type of this property.
                                          enum:
                                          - string
                                          - text
                                          - secret
                                          - number
                                          - select
                                          - multi
                                          - tag
                                          type: string
                                        label:
                                          description: |-
                                            A friendly name to describe this property. This will appear on user
                                            interfaces.
                                          type: string
                                        name:
                                          description: |-
                                            The property identifier. Must be unique across the collection of
                                            properties from this resource.
                                          type: string
                                        required:
                                          description: If this property is required or if its optional.
                                          type: boolean
                                        tip:
                                          description: |-
                                            Complementary text to help the user to fill the property value. This
                                            will appear on the user interface.
                                          nullable: true
                                          type: string
                                        values:
                                          description: |-
                                            A list of values available for the property. This is used if the kind
                                            is select, multi, or tags.
                                          items:
                                            type: string
                                          nullable: true
                                          type: array
                                      required:
                                      - kind
                                      - label
                                      - name
                                      - required
                                      type: object
                                    type: array
                                  setupScript:
                                    type: string
                                required:
                                - icon
                                - label
                                - properties
                                - setupScript
                                type: object
                            required:
                            - name
                            - spec
                            type: object
                          type: array
                        ports:
                          default: []
                          items:
                            properties:
                              exposure:
                                default: Internal
                                enum:
                                - Internal
                                - External
                                type: string
                              port:
                                format: int32
                                maximum: 65535.0
                                minimum: 1024.0
                                type: integer
                              protocol:
                                default: Tcp
                                enum:
                                - Http
                                - Tcp
                                - Udp
                                type: string
                            required:
                            - port
                            type: object
                          maxItems: 32
                          type: array
                        repositories:
                          items:
                            type: string
                          maxItems: 2000
                          type: array
                      required:
                      - baseImage
                      - id
                      type: object
                    maxItems: 32
                    type: array
                required:
                - resources
                - version
                - workspaces
                type: object
              workspacesImages:
                items:
                  properties:
                    image:
                      type: string
                    workspaceId:
                      type: string
                  required:
                  - image
                  - workspaceId
                  type: object
                type: array
            required:
            - run
            - templateSnapshot
            - workspacesImages
            type: object
          status:
            nullable: true
            type: object
        required:
        - spec
        title: EnvironmentSnapshot
        type: object
    served: true
    storage: true
    subresources:
      status: {}
